{
  "openapi": "3.0.0",
  "info": {
    "title": "AROGYA Healthcare Platform API",
    "description": "Production-ready REST API for rural healthcare platform",
    "version": "1.0.0",
    "contact": {
      "name": "AROGYA Team",
      "email": "api@arogya.com"
    },
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000",
      "description": "Development server"
    },
    {
      "url": "https://api.arogya.com",
      "description": "Production server"
    }
  ],
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register new user",
        "description": "Create a new user account",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password", "full_name", "phone"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "example": "SecurePass123!"
                  },
                  "full_name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "phone": {
                    "type": "string",
                    "pattern": "^[0-9]{10}$",
                    "example": "9876543210"
                  },
                  "age": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 150
                  },
                  "gender": {
                    "type": "string",
                    "enum": ["male", "female", "other"]
                  },
                  "blood_group": {
                    "type": "string",
                    "enum": ["A+", "A-", "B+", "B-", "AB+", "AB-", "O+", "O-"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "email": {
                      "type": "string"
                    },
                    "access_token": {
                      "type": "string"
                    },
                    "refresh_token": {
                      "type": "string"
                    },
                    "token_type": {
                      "type": "string",
                      "example": "bearer"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input"
          },
          "409": {
            "description": "Email already exists"
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login",
        "description": "Authenticate user and get JWT tokens",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "refresh_token": {
                      "type": "string"
                    },
                    "token_type": {
                      "type": "string",
                      "example": "bearer"
                    },
                    "expires_in": {
                      "type": "integer",
                      "example": 900,
                      "description": "Token expiry in seconds"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Refresh access token",
        "description": "Get new access token using refresh token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["refresh_token"],
                "properties": {
                  "refresh_token": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "New access token issued"
          },
          "401": {
            "description": "Invalid refresh token"
          }
        }
      }
    },
    "/api/v1/users/profile": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user profile",
        "description": "Retrieve authenticated user's profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "email": {
                      "type": "string"
                    },
                    "full_name": {
                      "type": "string"
                    },
                    "phone": {
                      "type": "string"
                    },
                    "age": {
                      "type": "integer"
                    },
                    "gender": {
                      "type": "string"
                    },
                    "blood_group": {
                      "type": "string"
                    },
                    "medical_history": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "created_at": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "put": {
        "tags": ["Users"],
        "summary": "Update user profile",
        "description": "Update authenticated user's profile information",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "full_name": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "age": {
                    "type": "integer"
                  },
                  "gender": {
                    "type": "string"
                  },
                  "blood_group": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/hospitals": {
      "get": {
        "tags": ["Hospitals"],
        "summary": "List hospitals",
        "description": "Get list of hospitals with optional filtering and pagination",
        "parameters": [
          {
            "name": "state",
            "in": "query",
            "description": "Filter by state",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by hospital type (Government, Private, NGO)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "query",
            "in": "query",
            "description": "Search by hospital name",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "latitude",
            "in": "query",
            "description": "User latitude for nearby search",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "longitude",
            "in": "query",
            "description": "User longitude for nearby search",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "radius_km",
            "in": "query",
            "description": "Search radius in kilometers (default: 10)",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "skip",
            "in": "query",
            "description": "Number of records to skip (pagination)",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of records to return (max: 100)",
            "schema": {
              "type": "integer",
              "default": 20,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of hospitals",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "integer"
                    },
                    "skip": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "type": {
                            "type": "string"
                          },
                          "latitude": {
                            "type": "number"
                          },
                          "longitude": {
                            "type": "number"
                          },
                          "address": {
                            "type": "string"
                          },
                          "phone": {
                            "type": "string"
                          },
                          "emergency_services": {
                            "type": "boolean"
                          },
                          "bed_capacity": {
                            "type": "integer"
                          },
                          "specialties": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "rating": {
                            "type": "number"
                          },
                          "distance_km": {
                            "type": "number",
                            "description": "Distance from user (if nearby search)"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/hospitals/{id}": {
      "get": {
        "tags": ["Hospitals"],
        "summary": "Get hospital details",
        "description": "Get detailed information about a specific hospital",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Hospital ID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Hospital details"
          },
          "404": {
            "description": "Hospital not found"
          }
        }
      }
    },
    "/api/v1/doctors": {
      "get": {
        "tags": ["Doctors"],
        "summary": "List doctors",
        "description": "Get list of doctors with optional filtering",
        "parameters": [
          {
            "name": "hospital_id",
            "in": "query",
            "description": "Filter by hospital",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "specialty",
            "in": "query",
            "description": "Filter by specialty",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of doctors"
          }
        }
      }
    },
    "/api/v1/appointments": {
      "post": {
        "tags": ["Appointments"],
        "summary": "Book appointment",
        "description": "Create a new appointment with a doctor",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["doctor_id", "appointment_date"],
                "properties": {
                  "doctor_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "appointment_date": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Appointment created"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "tags": ["Appointments"],
        "summary": "Get user appointments",
        "description": "Get list of user's appointments",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "description": "Filter by status",
            "schema": {
              "type": "string",
              "enum": ["scheduled", "completed", "cancelled"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of appointments"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/appointments/{id}": {
      "get": {
        "tags": ["Appointments"],
        "summary": "Get appointment details",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Appointment details"
          },
          "404": {
            "description": "Appointment not found"
          }
        }
      },
      "put": {
        "tags": ["Appointments"],
        "summary": "Update appointment",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "appointment_date": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Appointment updated"
          }
        }
      },
      "delete": {
        "tags": ["Appointments"],
        "summary": "Cancel appointment",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Appointment cancelled"
          }
        }
      }
    },
    "/api/v1/symptoms/analyze": {
      "post": {
        "tags": ["Symptoms"],
        "summary": "Analyze symptoms",
        "description": "Get disease predictions based on symptoms using ML model",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["symptoms"],
                "properties": {
                  "symptoms": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": ["fever", "cough", "headache"]
                  },
                  "age": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 150
                  },
                  "gender": {
                    "type": "string",
                    "enum": ["male", "female", "other"]
                  },
                  "duration_days": {
                    "type": "integer",
                    "description": "Duration of symptoms in days"
                  },
                  "blood_pressure": {
                    "type": "string",
                    "example": "120/80",
                    "description": "Blood pressure in systolic/diastolic format"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Symptom analysis results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Analysis record ID"
                    },
                    "predicted_conditions": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "condition": {
                            "type": "string"
                          },
                          "confidence": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1
                          },
                          "severity": {
                            "type": "string",
                            "enum": ["mild", "moderate", "severe"]
                          },
                          "recommended_action": {
                            "type": "string",
                            "enum": ["home_care", "see_doctor", "emergency"]
                          },
                          "description": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "overall_severity": {
                      "type": "string",
                      "enum": ["mild", "moderate", "severe"]
                    },
                    "recommended_action": {
                      "type": "string",
                      "enum": ["home_care", "see_doctor", "emergency"]
                    },
                    "disclaimer": {
                      "type": "string",
                      "example": "This is not a medical diagnosis. Please consult a healthcare professional."
                    },
                    "created_at": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/symptoms/history": {
      "get": {
        "tags": ["Symptoms"],
        "summary": "Get symptom analysis history",
        "description": "Get user's previous symptom analyses",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Symptom analysis history"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/reminders": {
      "post": {
        "tags": ["Reminders"],
        "summary": "Create medication reminder",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["medication_name", "dosage", "frequency", "reminder_times"],
                "properties": {
                  "medication_name": {
                    "type": "string"
                  },
                  "dosage": {
                    "type": "string",
                    "example": "500mg"
                  },
                  "frequency": {
                    "type": "string",
                    "example": "Once daily"
                  },
                  "reminder_times": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "time",
                      "example": "08:00"
                    }
                  },
                  "start_date": {
                    "type": "string",
                    "format": "date"
                  },
                  "end_date": {
                    "type": "string",
                    "format": "date"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Reminder created"
          }
        }
      },
      "get": {
        "tags": ["Reminders"],
        "summary": "Get user reminders",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of reminders"
          }
        }
      }
    },
    "/api/v1/reminders/{id}": {
      "put": {
        "tags": ["Reminders"],
        "summary": "Update reminder",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Reminder updated"
          }
        }
      },
      "delete": {
        "tags": ["Reminders"],
        "summary": "Delete reminder",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Reminder deleted"
          }
        }
      }
    },
    "/api/v1/schemes": {
      "get": {
        "tags": ["Schemes"],
        "summary": "List government schemes",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "description": "Filter by category",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "Filter by state",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of schemes"
          }
        }
      }
    },
    "/api/v1/schemes/{id}": {
      "get": {
        "tags": ["Schemes"],
        "summary": "Get scheme details",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Scheme details"
          }
        }
      }
    },
    "/api/v1/schemes/{id}/apply": {
      "post": {
        "tags": ["Schemes"],
        "summary": "Apply for scheme",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "documents": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Document file IDs"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Application submitted"
          }
        }
      }
    },
    "/api/v1/emergency/sos": {
      "post": {
        "tags": ["Emergency"],
        "summary": "Send emergency SOS alert",
        "description": "Trigger emergency alert with location and medical info",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["latitude", "longitude"],
                "properties": {
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  },
                  "emergency_type": {
                    "type": "string",
                    "enum": ["medical", "accident", "other"]
                  },
                  "description": {
                    "type": "string"
                  },
                  "emergency_contacts": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "SOS alert sent",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "alert_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "status": {
                      "type": "string",
                      "example": "sent"
                    },
                    "nearest_hospital": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "distance_km": {
                          "type": "number"
                        },
                        "phone": {
                          "type": "string"
                        },
                        "eta_minutes": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "tags": ["System"],
        "summary": "Health check",
        "description": "Check if API is running",
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "version": {
                      "type": "string",
                      "example": "1.0.0"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT access token"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "string"
          },
          "status_code": {
            "type": "integer"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication endpoints"
    },
    {
      "name": "Users",
      "description": "User profile management"
    },
    {
      "name": "Hospitals",
      "description": "Hospital search and details"
    },
    {
      "name": "Doctors",
      "description": "Doctor information"
    },
    {
      "name": "Appointments",
      "description": "Appointment booking and management"
    },
    {
      "name": "Symptoms",
      "description": "Symptom analysis using ML"
    },
    {
      "name": "Reminders",
      "description": "Medication reminders"
    },
    {
      "name": "Schemes",
      "description": "Government healthcare schemes"
    },
    {
      "name": "Emergency",
      "description": "Emergency services"
    },
    {
      "name": "System",
      "description": "System health and status"
    }
  ]
}
